<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Moto Log üèçÔ∏è</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #121212;
            --card-dark: #1e1e1e;
            --text-light: #e0e0e0;
            --accent: #ff3b30; /* M√†u ƒë·ªè th·ªÉ thao */
        }
        
        body { background-color: var(--bg-dark); color: var(--text-light); font-family: 'Segoe UI', sans-serif; }
        
        .bike-card {
            background: linear-gradient(145deg, #2a2a2a, #1e1e1e);
            border-left: 5px solid var(--accent);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .odo-box {
            background-color: #000;
            color: #0f0; /* M√†u xanh l√° ki·ªÉu ƒë·ªìng h·ªì ƒëi·ªán t·ª≠ */
            font-family: 'Courier New', Courier, monospace;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            letter-spacing: 2px;
            border: 1px solid #333;
        }

        .form-control, .form-select {
            background-color: #2d2d2d;
            border: 1px solid #444;
            color: #fff;
        }
        .form-control:focus {
            background-color: #333;
            color: #fff;
            border-color: var(--accent);
            box-shadow: none;
        }

        .history-item {
            background-color: var(--card-dark);
            border-bottom: 1px solid #333;
            padding: 15px;
            transition: 0.2s;
        }
        .history-item:first-child { border-top-left-radius: 10px; border-top-right-radius: 10px; }
        .history-item:last-child { border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; border-bottom: none; }
        
        .btn-accent {
            background-color: var(--accent);
            color: white;
            font-weight: bold;
            border: none;
        }
        .btn-accent:hover { background-color: #d32f2f; color: white; }

        /* Icon service */
        .service-icon {
            width: 40px; height: 40px;
            background: #333;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            margin-right: 15px;
            font-size: 20px;
        }
    </style>
</head>
<body>

<div class="container py-4" style="max-width: 600px;">
    
    <div class="bike-card d-flex justify-content-between align-items-center">
        <div>
            <h2 class="m-0 fw-bold">Honda Winner X</h2>
            <small class="text-muted">Bi·ªÉn s·ªë: 29-H1 999.99</small>
        </div>
        <div class="text-end">
            <small class="d-block text-muted mb-1">ODO T·ªïng (KM)</small>
            <span class="odo-box" id="totalOdo">00000</span>
        </div>
    </div>

    <div class="card bg-dark text-white border-secondary mb-4">
        <div class="card-header border-secondary fw-bold">üõ†Ô∏è Ghi Nh·∫≠t K√Ω M·ªõi</div>
        <div class="card-body">
            <form id="serviceForm">
                <div class="row g-2">
                    <div class="col-6 mb-3">
                        <label class="small text-muted">Ng√†y th·ª±c hi·ªán</label>
                        <input type="date" class="form-control" id="date" required>
                    </div>
                    <div class="col-6 mb-3">
                        <label class="small text-muted">S·ªë ODO hi·ªán t·∫°i (Km)</label>
                        <input type="number" class="form-control" id="odo" placeholder="Vd: 12000" required>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="small text-muted">H·∫°ng m·ª•c l√†m</label>
                    <select class="form-select" id="serviceType">
                        <option value="üõ¢Ô∏è Thay nh·ªõt m√°y">üõ¢Ô∏è Thay nh·ªõt m√°y</option>
                        <option value="‚öôÔ∏è Thay nh·ªõt l√°p">‚öôÔ∏è Thay nh·ªõt l√°p/nh√¥ng x√≠ch</option>
                        <option value="üõë Thay m√° phanh">üõë Thay m√° phanh</option>
                        <option value="üåä N∆∞·ªõc l√†m m√°t">üåä N∆∞·ªõc l√†m m√°t</option>
                        <option value="üõ†Ô∏è S·ª≠a ch·ªØa kh√°c">üõ†Ô∏è S·ª≠a ch·ªØa kh√°c</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <input type="text" class="form-control" id="note" placeholder="Ghi ch√∫ (Vd: Nh·ªõt Motul, L·ªëp Michelin...)">
                </div>

                <div class="mb-3">
                    <input type="number" class="form-control" id="cost" placeholder="Chi ph√≠ (VND)" required>
                </div>

                <button type="submit" class="btn btn-accent w-100 py-2">L∆∞u Nh·∫≠t K√Ω</button>
            </form>
        </div>
    </div>

    <h5 class="mb-3 fw-bold ps-2 border-start border-3 border-danger">L·ªãch S·ª≠ B·∫£o D∆∞·ª°ng</h5>
    <div id="logList">
        </div>

</div>

<script>
    const form = document.getElementById('serviceForm');
    const logList = document.getElementById('logList');
    const totalOdoDisplay = document.getElementById('totalOdo');
    const dateInput = document.getElementById('date');

    // M·∫∑c ƒë·ªãnh ng√†y h√¥m nay
    dateInput.valueAsDate = new Date();

    // D·ªØ li·ªáu m·∫´u (sau n√†y l·∫•y t·ª´ LocalStorage/Google Sheet)
    let services = JSON.parse(localStorage.getItem('motoLogs')) || [];

    function renderLogs() {
        logList.innerHTML = '';
        let maxOdo = 0;

        // S·∫Øp x·∫øp: M·ªõi nh·∫•t (ODO l·ªõn nh·∫•t) l√™n ƒë·∫ßu
        services.sort((a, b) => b.odo - a.odo);

        services.forEach((item, index) => {
            // C·∫≠p nh·∫≠t ODO l·ªõn nh·∫•t ƒë·ªÉ hi·ªÉn th·ªã l√™n b·∫£ng ƒëi·ªÅu khi·ªÉn
            if (parseInt(item.odo) > maxOdo) maxOdo = parseInt(item.odo);

            const div = document.createElement('div');
            div.className = 'history-item d-flex justify-content-between align-items-center';
            div.innerHTML = `
                <div class="d-flex align-items-center">
                    <div class="service-icon">${item.type.split(' ')[0]}</div>
                    <div>
                        <div class="fw-bold">${item.type.substring(3)}</div>
                        <div class="small text-muted">üìÖ ${item.date} | üõ§Ô∏è ${parseInt(item.odo).toLocaleString()} km</div>
                        <div class="small fst-italic text-secondary">${item.note}</div>
                    </div>
                </div>
                <div class="text-end">
                    <div class="fw-bold text-success">-${parseInt(item.cost).toLocaleString()} ƒë</div>
                    <button class="btn btn-sm btn-link text-danger text-decoration-none p-0" onclick="deleteLog(${index})">X√≥a</button>
                </div>
            `;
            logList.appendChild(div);
        });

        // C·∫≠p nh·∫≠t ODO t·ªïng
        totalOdoDisplay.innerText = maxOdo.toLocaleString();
    }

    form.addEventListener('submit', (e) => {
        e.preventDefault();
        const date = formatDate(document.getElementById('date').value);
        const odo = document.getElementById('odo').value;
        const type = document.getElementById('serviceType').value;
        const note = document.getElementById('note').value;
        const cost = document.getElementById('cost').value;

        services.push({ date, odo, type, note, cost });
        localStorage.setItem('motoLogs', JSON.stringify(services));
        renderLogs();
        form.reset();
        dateInput.valueAsDate = new Date();
    });

    window.deleteLog = (index) => {
        if(confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a d√≤ng n√†y?')) {
            services.splice(index, 1);
            localStorage.setItem('motoLogs', JSON.stringify(services));
            renderLogs();
        }
    }

    function formatDate(dateStr) {
        if(!dateStr) return '';
        const [y, m, d] = dateStr.split('-');
        return `${d}/${m}/${y}`;
    }

    renderLogs();
</script>

</body>
</html>
